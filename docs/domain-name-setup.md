# Custom Load Balancer DNS Names Guide

Unfortunately, AWS Application Load Balancers (ALBs) cannot have custom DNS names like `katechat-staging.eu-central-1.elb.amazonaws.com`. The DNS name is automatically generated by AWS and always includes a random suffix for uniqueness.

## Available Solutions

### Solution 1: Custom Domain with Route 53 (Recommended)

This is the best approach for production applications:

#### Step 1: Set up your domain variables

Create a `terraform.tfvars` file:

```hcl
# terraform.tfvars
aws_region      = "eu-central-1"
environment     = "staging"
project_name    = "katechat"
domain_name     = "your-domain.com"  # Replace with your actual domain
certificate_arn = "arn:aws:acm:eu-central-1:123456789012:certificate/your-cert-id"  # Optional
```

#### Step 2: Apply the infrastructure

```bash
cd infrastructure
terraform plan -var-file="terraform.tfvars"
terraform apply -var-file="terraform.tfvars"
```

#### Step 3: Configure DNS

After applying, you'll get:
- **Production**: `your-domain.com` → points to ALB
- **Staging**: `staging.your-domain.com` → points to ALB

#### Benefits:
- ✅ Clean, memorable URLs
- ✅ SSL/TLS certificate support
- ✅ Professional appearance
- ✅ SEO friendly

### Solution 2: Use ALB DNS Name Directly

If you don't want to set up a custom domain, you can use the ALB DNS name directly:

#### Get the DNS name:
```bash
cd infrastructure
terraform output alb_dns_name
```

This will give you something like: `katechat-staging-alb-1234567890.eu-central-1.elb.amazonaws.com`

#### Benefits:
- ✅ No additional setup required
- ✅ Works immediately
- ❌ Long, hard-to-remember URL
- ❌ Includes random suffix

### Solution 3: Network Load Balancer (Limited)

Network Load Balancers have shorter names but limited features:

To use this approach, uncomment the NLB section in `load-balancer.tf` and comment out the ALB section.

#### Benefits:
- ✅ Shorter DNS names
- ❌ No HTTP/HTTPS path-based routing
- ❌ No SSL termination
- ❌ Limited health checks

## Recommended Implementation

For a professional application, I recommend **Solution 1** with a custom domain:

### 1. Purchase a domain (if you don't have one)
- Use Route 53, GoDaddy, Namecheap, etc.
- Example: `katechat.app`, `yourstartup.com`

### 2. Set up SSL certificate
```bash
# Request certificate in AWS Certificate Manager
aws acm request-certificate \
  --domain-name "your-domain.com" \
  --subject-alternative-names "*.your-domain.com" \
  --validation-method DNS \
  --region eu-central-1
```

### 3. Update your configuration
```hcl
# terraform.tfvars
domain_name = "katechat.app"  # Your actual domain
certificate_arn = "arn:aws:acm:eu-central-1:123456789012:certificate/abcd1234-..."
```

### 4. Update DNS nameservers
Point your domain's nameservers to the Route 53 hosted zone nameservers.

## Final URLs

After setup, you'll have:
- **Staging**: `https://staging.katechat.app`
- **Production**: `https://katechat.app`

Both pointing to your load balancer with proper SSL certificates.

## Important Notes

1. **AWS ALB names cannot be customized** - the random suffix is mandatory
2. **Custom domains are the professional solution** - used by all major applications
3. **Route 53 setup is one-time** - works for all environments
4. **SSL certificates are free** with AWS Certificate Manager

## Cost Implications

- Route 53 hosted zone: ~$0.50/month
- SSL certificate: Free with ACM
- Custom domain: $10-50/year (depends on TLD)

The investment is minimal compared to the professional benefits.
